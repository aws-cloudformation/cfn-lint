{
 "additionalProperties": false,
 "createOnlyProperties": [
  "/properties/DeliveryStreamName",
  "/properties/DeliveryStreamType"
 ],
 "definitions": {
  "BufferingHints": {
   "additionalProperties": false,
   "properties": {
    "IntervalInSeconds": {
     "type": "integer"
    },
    "SizeInMBs": {
     "type": "integer"
    }
   },
   "required": [
    "IntervalInSeconds",
    "SizeInMBs"
   ],
   "type": "object"
  },
  "CloudWatchLoggingOptions": {
   "additionalProperties": false,
   "properties": {
    "Enabled": {
     "type": "boolean"
    },
    "LogGroupName": {
     "format": "AWS::Logs::LogGroup.Name",
     "pattern": "[\\.\\-_/#A-Za-z0-9]*",
     "type": "string"
    },
    "LogStreamName": {
     "pattern": "[^:*]*",
     "type": "string"
    }
   },
   "type": "object"
  },
  "CopyCommand": {
   "additionalProperties": false,
   "properties": {
    "CopyOptions": {
     "type": "string"
    },
    "DataTableColumns": {
     "type": "string"
    },
    "DataTableName": {
     "type": "string"
    }
   },
   "required": [
    "DataTableName"
   ],
   "type": "object"
  },
  "DataFormatConversionConfiguration": {
   "additionalProperties": false,
   "properties": {
    "Enabled": {
     "type": "boolean"
    },
    "InputFormatConfiguration": {
     "$ref": "#/definitions/InputFormatConfiguration"
    },
    "OutputFormatConfiguration": {
     "$ref": "#/definitions/OutputFormatConfiguration"
    },
    "SchemaConfiguration": {
     "$ref": "#/definitions/SchemaConfiguration"
    }
   },
   "required": [
    "InputFormatConfiguration",
    "Enabled",
    "SchemaConfiguration",
    "OutputFormatConfiguration"
   ],
   "type": "object"
  },
  "Deserializer": {
   "additionalProperties": false,
   "properties": {
    "HiveJsonSerDe": {
     "$ref": "#/definitions/HiveJsonSerDe"
    },
    "OpenXJsonSerDe": {
     "$ref": "#/definitions/OpenXJsonSerDe"
    }
   },
   "type": "object"
  },
  "ElasticsearchBufferingHints": {
   "additionalProperties": false,
   "properties": {
    "IntervalInSeconds": {
     "type": "integer"
    },
    "SizeInMBs": {
     "type": "integer"
    }
   },
   "required": [
    "IntervalInSeconds",
    "SizeInMBs"
   ],
   "type": "object"
  },
  "ElasticsearchDestinationConfiguration": {
   "additionalProperties": false,
   "properties": {
    "BufferingHints": {
     "$ref": "#/definitions/ElasticsearchBufferingHints"
    },
    "CloudWatchLoggingOptions": {
     "$ref": "#/definitions/CloudWatchLoggingOptions"
    },
    "DomainARN": {
     "type": "string"
    },
    "IndexName": {
     "type": "string"
    },
    "IndexRotationPeriod": {
     "type": "string"
    },
    "ProcessingConfiguration": {
     "$ref": "#/definitions/ProcessingConfiguration"
    },
    "RetryOptions": {
     "$ref": "#/definitions/ElasticsearchRetryOptions"
    },
    "RoleARN": {
     "type": "string"
    },
    "S3BackupMode": {
     "type": "string"
    },
    "S3Configuration": {
     "$ref": "#/definitions/S3DestinationConfiguration"
    },
    "TypeName": {
     "type": "string"
    }
   },
   "required": [
    "IndexName",
    "TypeName",
    "S3Configuration",
    "BufferingHints",
    "IndexRotationPeriod",
    "RetryOptions",
    "DomainARN",
    "RoleARN",
    "S3BackupMode"
   ],
   "type": "object"
  },
  "ElasticsearchRetryOptions": {
   "additionalProperties": false,
   "properties": {
    "DurationInSeconds": {
     "type": "integer"
    }
   },
   "required": [
    "DurationInSeconds"
   ],
   "type": "object"
  },
  "EncryptionConfiguration": {
   "additionalProperties": false,
   "properties": {
    "KMSEncryptionConfig": {
     "$ref": "#/definitions/KMSEncryptionConfig"
    },
    "NoEncryptionConfig": {
     "type": "string"
    }
   },
   "type": "object"
  },
  "ExtendedS3DestinationConfiguration": {
   "additionalProperties": false,
   "properties": {
    "BucketARN": {
     "type": "string"
    },
    "BufferingHints": {
     "$ref": "#/definitions/BufferingHints"
    },
    "CloudWatchLoggingOptions": {
     "$ref": "#/definitions/CloudWatchLoggingOptions"
    },
    "CompressionFormat": {
     "type": "string"
    },
    "DataFormatConversionConfiguration": {
     "$ref": "#/definitions/DataFormatConversionConfiguration"
    },
    "EncryptionConfiguration": {
     "$ref": "#/definitions/EncryptionConfiguration"
    },
    "ErrorOutputPrefix": {
     "type": "string"
    },
    "Prefix": {
     "type": "string"
    },
    "ProcessingConfiguration": {
     "$ref": "#/definitions/ProcessingConfiguration"
    },
    "RoleARN": {
     "type": "string"
    },
    "S3BackupConfiguration": {
     "$ref": "#/definitions/S3DestinationConfiguration"
    },
    "S3BackupMode": {
     "type": "string"
    }
   },
   "required": [
    "BucketARN",
    "BufferingHints",
    "CompressionFormat",
    "RoleARN"
   ],
   "type": "object"
  },
  "HiveJsonSerDe": {
   "additionalProperties": false,
   "properties": {
    "TimestampFormats": {
     "items": {
      "pattern": "^(?!\\s*$).+",
      "type": "string"
     },
     "type": "array",
     "uniqueItems": true
    }
   },
   "type": "object"
  },
  "InputFormatConfiguration": {
   "additionalProperties": false,
   "properties": {
    "Deserializer": {
     "$ref": "#/definitions/Deserializer"
    }
   },
   "required": [
    "Deserializer"
   ],
   "type": "object"
  },
  "KMSEncryptionConfig": {
   "additionalProperties": false,
   "properties": {
    "AWSKMSKeyARN": {
     "pattern": "arn:.*:kms:[a-zA-Z0-9\\-]+:\\d{12}:(key|alias)/[a-zA-Z_0-9+=,.@\\-_/]+",
     "type": "string"
    }
   },
   "required": [
    "AWSKMSKeyARN"
   ],
   "type": "object"
  },
  "KinesisStreamSourceConfiguration": {
   "additionalProperties": false,
   "properties": {
    "KinesisStreamARN": {
     "type": "string"
    },
    "RoleARN": {
     "type": "string"
    }
   },
   "required": [
    "KinesisStreamARN",
    "RoleARN"
   ],
   "type": "object"
  },
  "OpenXJsonSerDe": {
   "additionalProperties": false,
   "properties": {
    "CaseInsensitive": {
     "type": "boolean"
    },
    "ColumnToJsonKeyMappings": {
     "patternProperties": {
      "[a-zA-Z0-9]+": {
       "type": "string"
      }
     },
     "type": "object"
    },
    "ConvertDotsInJsonKeysToUnderscores": {
     "type": "boolean"
    }
   },
   "type": "object"
  },
  "OrcSerDe": {
   "additionalProperties": false,
   "properties": {
    "BlockSizeBytes": {
     "type": "integer"
    },
    "BloomFilterColumns": {
     "items": {
      "pattern": "^\\S+$",
      "type": "string"
     },
     "type": "array",
     "uniqueItems": true
    },
    "BloomFilterFalsePositiveProbability": {
     "type": "number"
    },
    "Compression": {
     "enum": [
      "NONE",
      "SNAPPY",
      "ZLIB"
     ],
     "type": "string"
    },
    "DictionaryKeyThreshold": {
     "type": "number"
    },
    "EnablePadding": {
     "type": "boolean"
    },
    "FormatVersion": {
     "enum": [
      "V0_11",
      "V0_12"
     ],
     "type": "string"
    },
    "PaddingTolerance": {
     "type": "number"
    },
    "RowIndexStride": {
     "type": "integer"
    },
    "StripeSizeBytes": {
     "type": "integer"
    }
   },
   "type": "object"
  },
  "OutputFormatConfiguration": {
   "additionalProperties": false,
   "properties": {
    "Serializer": {
     "$ref": "#/definitions/Serializer"
    }
   },
   "required": [
    "Serializer"
   ],
   "type": "object"
  },
  "ParquetSerDe": {
   "additionalProperties": false,
   "properties": {
    "BlockSizeBytes": {
     "type": "integer"
    },
    "Compression": {
     "enum": [
      "GZIP",
      "SNAPPY",
      "UNCOMPRESSED"
     ],
     "type": "string"
    },
    "EnableDictionaryCompression": {
     "type": "boolean"
    },
    "MaxPaddingBytes": {
     "type": "integer"
    },
    "PageSizeBytes": {
     "type": "integer"
    },
    "WriterVersion": {
     "enum": [
      "V1",
      "V2"
     ],
     "type": "string"
    }
   },
   "type": "object"
  },
  "ProcessingConfiguration": {
   "additionalProperties": false,
   "properties": {
    "Enabled": {
     "type": "boolean"
    },
    "Processors": {
     "items": {
      "$ref": "#/definitions/Processor"
     },
     "type": "array",
     "uniqueItems": true
    }
   },
   "type": "object"
  },
  "Processor": {
   "additionalProperties": false,
   "properties": {
    "Parameters": {
     "items": {
      "$ref": "#/definitions/ProcessorParameter"
     },
     "type": "array",
     "uniqueItems": true
    },
    "Type": {
     "type": "string"
    }
   },
   "required": [
    "Type",
    "Parameters"
   ],
   "type": "object"
  },
  "ProcessorParameter": {
   "additionalProperties": false,
   "properties": {
    "ParameterName": {
     "enum": [
      "BufferIntervalInSeconds",
      "BufferSizeInMBs",
      "CompressionFormat",
      "DataMessageExtraction",
      "Delimiter",
      "JsonParsingEngine",
      "LambdaArn",
      "MetadataExtractionQuery",
      "NumberOfRetries",
      "RoleArn",
      "SubRecordType"
     ],
     "type": "string"
    },
    "ParameterValue": {
     "pattern": "^(?!\\s*$).+",
     "type": "string"
    }
   },
   "required": [
    "ParameterValue",
    "ParameterName"
   ],
   "type": "object"
  },
  "RedshiftDestinationConfiguration": {
   "additionalProperties": false,
   "properties": {
    "CloudWatchLoggingOptions": {
     "$ref": "#/definitions/CloudWatchLoggingOptions"
    },
    "ClusterJDBCURL": {
     "type": "string"
    },
    "CopyCommand": {
     "$ref": "#/definitions/CopyCommand"
    },
    "Password": {
     "type": "string"
    },
    "ProcessingConfiguration": {
     "$ref": "#/definitions/ProcessingConfiguration"
    },
    "RoleARN": {
     "type": "string"
    },
    "S3Configuration": {
     "$ref": "#/definitions/S3DestinationConfiguration"
    },
    "Username": {
     "type": "string"
    }
   },
   "required": [
    "S3Configuration",
    "Username",
    "CopyCommand",
    "ClusterJDBCURL",
    "RoleARN",
    "Password"
   ],
   "type": "object"
  },
  "S3DestinationConfiguration": {
   "additionalProperties": false,
   "properties": {
    "BucketARN": {
     "type": "string"
    },
    "BufferingHints": {
     "$ref": "#/definitions/BufferingHints"
    },
    "CloudWatchLoggingOptions": {
     "$ref": "#/definitions/CloudWatchLoggingOptions"
    },
    "CompressionFormat": {
     "type": "string"
    },
    "EncryptionConfiguration": {
     "$ref": "#/definitions/EncryptionConfiguration"
    },
    "ErrorOutputPrefix": {
     "type": "string"
    },
    "Prefix": {
     "type": "string"
    },
    "RoleARN": {
     "type": "string"
    }
   },
   "required": [
    "BucketARN",
    "BufferingHints",
    "CompressionFormat",
    "RoleARN"
   ],
   "type": "object"
  },
  "SchemaConfiguration": {
   "additionalProperties": false,
   "properties": {
    "CatalogId": {
     "pattern": "^\\S+$",
     "type": "string"
    },
    "DatabaseName": {
     "pattern": "^\\S+$",
     "type": "string"
    },
    "Region": {
     "pattern": "^\\S+$",
     "type": "string"
    },
    "RoleARN": {
     "type": "string"
    },
    "TableName": {
     "pattern": "^\\S+$",
     "type": "string"
    },
    "VersionId": {
     "pattern": "^\\S+$",
     "type": "string"
    }
   },
   "required": [
    "VersionId",
    "TableName",
    "DatabaseName",
    "Region",
    "CatalogId",
    "RoleARN"
   ],
   "type": "object"
  },
  "Serializer": {
   "additionalProperties": false,
   "properties": {
    "OrcSerDe": {
     "$ref": "#/definitions/OrcSerDe"
    },
    "ParquetSerDe": {
     "$ref": "#/definitions/ParquetSerDe"
    }
   },
   "type": "object"
  },
  "SplunkDestinationConfiguration": {
   "additionalProperties": false,
   "properties": {
    "CloudWatchLoggingOptions": {
     "$ref": "#/definitions/CloudWatchLoggingOptions"
    },
    "HECAcknowledgmentTimeoutInSeconds": {
     "type": "integer"
    },
    "HECEndpoint": {
     "type": "string"
    },
    "HECEndpointType": {
     "type": "string"
    },
    "HECToken": {
     "type": "string"
    },
    "ProcessingConfiguration": {
     "$ref": "#/definitions/ProcessingConfiguration"
    },
    "RetryOptions": {
     "$ref": "#/definitions/SplunkRetryOptions"
    },
    "S3BackupMode": {
     "type": "string"
    },
    "S3Configuration": {
     "$ref": "#/definitions/S3DestinationConfiguration"
    }
   },
   "required": [
    "HECEndpoint",
    "S3Configuration",
    "HECToken",
    "HECEndpointType"
   ],
   "type": "object"
  },
  "SplunkRetryOptions": {
   "additionalProperties": false,
   "properties": {
    "DurationInSeconds": {
     "type": "integer"
    }
   },
   "required": [
    "DurationInSeconds"
   ],
   "type": "object"
  }
 },
 "primaryIdentifier": [
  "/properties/Id"
 ],
 "properties": {
  "Arn": {
   "type": "string"
  },
  "DeliveryStreamName": {
   "type": "string"
  },
  "DeliveryStreamType": {
   "type": "string"
  },
  "ElasticsearchDestinationConfiguration": {
   "$ref": "#/definitions/ElasticsearchDestinationConfiguration"
  },
  "ExtendedS3DestinationConfiguration": {
   "$ref": "#/definitions/ExtendedS3DestinationConfiguration"
  },
  "Id": {
   "type": "string"
  },
  "KinesisStreamSourceConfiguration": {
   "$ref": "#/definitions/KinesisStreamSourceConfiguration"
  },
  "RedshiftDestinationConfiguration": {
   "$ref": "#/definitions/RedshiftDestinationConfiguration"
  },
  "S3DestinationConfiguration": {
   "$ref": "#/definitions/S3DestinationConfiguration"
  },
  "SplunkDestinationConfiguration": {
   "$ref": "#/definitions/SplunkDestinationConfiguration"
  }
 },
 "readOnlyProperties": [
  "/properties/Id",
  "/properties/Arn"
 ],
 "typeName": "AWS::KinesisFirehose::DeliveryStream"
}
