{
 "additionalProperties": false,
 "createOnlyProperties": [
  "/properties/JobDefinitionName",
  "/properties/ContainerProperties",
  "/properties/EksProperties",
  "/properties/NodeProperties",
  "/properties/Parameters",
  "/properties/PlatformCapabilities",
  "/properties/PropagateTags",
  "/properties/RetryStrategy",
  "/properties/SchedulingPriority",
  "/properties/Timeout",
  "/properties/Type"
 ],
 "definitions": {
  "ContainerProperties": {
   "additionalProperties": false,
   "properties": {
    "Command": {
     "insertionOrder": true,
     "items": {
      "type": "string"
     },
     "type": "array",
     "uniqueItems": false
    },
    "Environment": {
     "insertionOrder": true,
     "items": {
      "$ref": "#/definitions/Environment"
     },
     "type": "array",
     "uniqueItems": false
    },
    "EphemeralStorage": {
     "additionalProperties": false,
     "properties": {
      "SizeInGiB": {
       "type": "integer"
      }
     },
     "required": [
      "SizeInGiB"
     ],
     "type": "object"
    },
    "ExecutionRoleArn": {
     "type": "string"
    },
    "FargatePlatformConfiguration": {
     "additionalProperties": false,
     "properties": {
      "PlatformVersion": {
       "type": "string"
      }
     },
     "type": "object"
    },
    "Image": {
     "type": "string"
    },
    "InstanceType": {
     "type": "string"
    },
    "JobRoleArn": {
     "type": "string"
    },
    "LinuxParameters": {
     "additionalProperties": false,
     "properties": {
      "Devices": {
       "insertionOrder": false,
       "items": {
        "$ref": "#/definitions/Device"
       },
       "type": "array",
       "uniqueItems": false
      },
      "InitProcessEnabled": {
       "type": "boolean"
      },
      "MaxSwap": {
       "type": "integer"
      },
      "SharedMemorySize": {
       "type": "integer"
      },
      "Swappiness": {
       "type": "integer"
      },
      "Tmpfs": {
       "insertionOrder": false,
       "items": {
        "$ref": "#/definitions/Tmpfs"
       },
       "type": "array",
       "uniqueItems": false
      }
     },
     "type": "object"
    },
    "LogConfiguration": {
     "additionalProperties": false,
     "properties": {
      "LogDriver": {
       "type": "string"
      },
      "Options": {
       "additionalProperties": false,
       "patternProperties": {
        ".*": {
         "type": "string"
        }
       },
       "type": "object"
      },
      "SecretOptions": {
       "insertionOrder": false,
       "items": {
        "$ref": "#/definitions/Secret"
       },
       "type": "array",
       "uniqueItems": false
      }
     },
     "required": [
      "LogDriver"
     ],
     "type": "object"
    },
    "Memory": {
     "type": "integer"
    },
    "MountPoints": {
     "insertionOrder": false,
     "items": {
      "$ref": "#/definitions/MountPoint"
     },
     "type": "array",
     "uniqueItems": false
    },
    "NetworkConfiguration": {
     "additionalProperties": false,
     "properties": {
      "AssignPublicIp": {
       "type": "string"
      }
     },
     "type": "object"
    },
    "Privileged": {
     "type": "boolean"
    },
    "ReadonlyRootFilesystem": {
     "type": "boolean"
    },
    "ResourceRequirements": {
     "insertionOrder": false,
     "items": {
      "$ref": "#/definitions/ResourceRequirement"
     },
     "type": "array",
     "uniqueItems": false
    },
    "RuntimePlatform": {
     "additionalProperties": false,
     "properties": {
      "CpuArchitecture": {
       "type": "string"
      },
      "OperatingSystemFamily": {
       "type": "string"
      }
     },
     "type": "object"
    },
    "Secrets": {
     "insertionOrder": false,
     "items": {
      "$ref": "#/definitions/Secret"
     },
     "type": "array",
     "uniqueItems": false
    },
    "Ulimits": {
     "insertionOrder": false,
     "items": {
      "$ref": "#/definitions/Ulimit"
     },
     "type": "array",
     "uniqueItems": false
    },
    "User": {
     "type": "string"
    },
    "Vcpus": {
     "type": "integer"
    },
    "Volumes": {
     "insertionOrder": false,
     "items": {
      "$ref": "#/definitions/Volume"
     },
     "type": "array",
     "uniqueItems": false
    }
   },
   "required": [
    "Image"
   ],
   "type": "object"
  },
  "Device": {
   "additionalProperties": false,
   "properties": {
    "ContainerPath": {
     "type": "string"
    },
    "HostPath": {
     "type": "string"
    },
    "Permissions": {
     "insertionOrder": false,
     "items": {
      "type": "string"
     },
     "type": "array",
     "uniqueItems": false
    }
   },
   "type": "object"
  },
  "EFSAuthorizationConfig": {
   "additionalProperties": false,
   "properties": {
    "AccessPointId": {
     "type": "string"
    },
    "Iam": {
     "type": "string"
    }
   },
   "type": "object"
  },
  "EFSVolumeConfiguration": {
   "additionalProperties": false,
   "properties": {
    "AuthorizationConfig": {
     "$ref": "#/definitions/EFSAuthorizationConfig"
    },
    "FileSystemId": {
     "type": "string"
    },
    "RootDirectory": {
     "type": "string"
    },
    "TransitEncryption": {
     "type": "string"
    },
    "TransitEncryptionPort": {
     "type": "integer"
    }
   },
   "required": [
    "FileSystemId"
   ],
   "type": "object"
  },
  "EksContainer": {
   "additionalProperties": false,
   "properties": {
    "Args": {
     "insertionOrder": true,
     "items": {
      "type": "string"
     },
     "type": "array",
     "uniqueItems": false
    },
    "Command": {
     "insertionOrder": true,
     "items": {
      "type": "string"
     },
     "type": "array",
     "uniqueItems": false
    },
    "Env": {
     "insertionOrder": false,
     "items": {
      "$ref": "#/definitions/EksContainerEnvironmentVariable"
     },
     "type": "array",
     "uniqueItems": false
    },
    "Image": {
     "type": "string"
    },
    "ImagePullPolicy": {
     "type": "string"
    },
    "Name": {
     "type": "string"
    },
    "Resources": {
     "$ref": "#/definitions/EksContainerResourceRequirements"
    },
    "SecurityContext": {
     "$ref": "#/definitions/EksContainerSecurityContext"
    },
    "VolumeMounts": {
     "insertionOrder": false,
     "items": {
      "$ref": "#/definitions/EksContainerVolumeMount"
     },
     "type": "array",
     "uniqueItems": false
    }
   },
   "required": [
    "Image"
   ],
   "type": "object"
  },
  "EksContainerEnvironmentVariable": {
   "additionalProperties": false,
   "properties": {
    "Name": {
     "type": "string"
    },
    "Value": {
     "type": "string"
    }
   },
   "required": [
    "Name"
   ],
   "type": "object"
  },
  "EksContainerResourceRequirements": {
   "additionalProperties": false,
   "properties": {
    "Limits": {
     "additionalProperties": false,
     "patternProperties": {
      ".*": {
       "type": "string"
      }
     },
     "type": "object"
    },
    "Requests": {
     "additionalProperties": false,
     "patternProperties": {
      ".*": {
       "type": "string"
      }
     },
     "type": "object"
    }
   },
   "type": "object"
  },
  "EksContainerSecurityContext": {
   "additionalProperties": false,
   "properties": {
    "Privileged": {
     "type": "boolean"
    },
    "ReadOnlyRootFilesystem": {
     "type": "boolean"
    },
    "RunAsGroup": {
     "type": "integer"
    },
    "RunAsNonRoot": {
     "type": "boolean"
    },
    "RunAsUser": {
     "type": "integer"
    }
   },
   "type": "object"
  },
  "EksContainerVolumeMount": {
   "additionalProperties": false,
   "properties": {
    "MountPath": {
     "type": "string"
    },
    "Name": {
     "type": "string"
    },
    "ReadOnly": {
     "type": "boolean"
    }
   },
   "type": "object"
  },
  "EksEmptyDir": {
   "additionalProperties": false,
   "properties": {
    "Medium": {
     "type": "string"
    },
    "SizeLimit": {
     "type": "string"
    }
   },
   "type": "object"
  },
  "EksHostPath": {
   "additionalProperties": false,
   "properties": {
    "Path": {
     "type": "string"
    }
   },
   "type": "object"
  },
  "EksMetadata": {
   "additionalProperties": false,
   "properties": {
    "Labels": {
     "additionalProperties": false,
     "patternProperties": {
      ".*": {
       "type": "string"
      }
     },
     "type": "object"
    }
   },
   "type": "object"
  },
  "EksPodProperties": {
   "additionalProperties": false,
   "properties": {
    "Containers": {
     "insertionOrder": false,
     "items": {
      "$ref": "#/definitions/EksContainer"
     },
     "type": "array",
     "uniqueItems": false
    },
    "DnsPolicy": {
     "type": "string"
    },
    "HostNetwork": {
     "type": "boolean"
    },
    "Metadata": {
     "$ref": "#/definitions/EksMetadata"
    },
    "ServiceAccountName": {
     "type": "string"
    },
    "Volumes": {
     "insertionOrder": false,
     "items": {
      "$ref": "#/definitions/EksVolume"
     },
     "type": "array",
     "uniqueItems": false
    }
   },
   "type": "object"
  },
  "EksProperties": {
   "additionalProperties": false,
   "properties": {
    "PodProperties": {
     "$ref": "#/definitions/EksPodProperties"
    }
   },
   "type": "object"
  },
  "EksSecret": {
   "additionalProperties": false,
   "properties": {
    "Optional": {
     "type": "boolean"
    },
    "SecretName": {
     "type": "string"
    }
   },
   "required": [
    "SecretName"
   ],
   "type": "object"
  },
  "EksVolume": {
   "additionalProperties": false,
   "properties": {
    "EmptyDir": {
     "$ref": "#/definitions/EksEmptyDir"
    },
    "HostPath": {
     "$ref": "#/definitions/EksHostPath"
    },
    "Name": {
     "type": "string"
    },
    "Secret": {
     "$ref": "#/definitions/EksSecret"
    }
   },
   "required": [
    "Name"
   ],
   "type": "object"
  },
  "Environment": {
   "additionalProperties": false,
   "properties": {
    "Name": {
     "type": "string"
    },
    "Value": {
     "type": "string"
    }
   },
   "type": "object"
  },
  "EvaluateOnExit": {
   "additionalProperties": false,
   "properties": {
    "Action": {
     "type": "string"
    },
    "OnExitCode": {
     "type": "string"
    },
    "OnReason": {
     "type": "string"
    },
    "OnStatusReason": {
     "type": "string"
    }
   },
   "required": [
    "Action"
   ],
   "type": "object"
  },
  "Host": {
   "additionalProperties": false,
   "properties": {
    "SourcePath": {
     "type": "string"
    }
   },
   "type": "object"
  },
  "JobTimeout": {
   "additionalProperties": false,
   "properties": {
    "AttemptDurationSeconds": {
     "type": "integer"
    }
   },
   "type": "object"
  },
  "MountPoint": {
   "additionalProperties": false,
   "properties": {
    "ContainerPath": {
     "type": "string"
    },
    "ReadOnly": {
     "type": "boolean"
    },
    "SourceVolume": {
     "type": "string"
    }
   },
   "type": "object"
  },
  "NodeProperties": {
   "additionalProperties": false,
   "properties": {
    "MainNode": {
     "type": "integer"
    },
    "NodeRangeProperties": {
     "insertionOrder": false,
     "items": {
      "$ref": "#/definitions/NodeRangeProperty"
     },
     "type": "array",
     "uniqueItems": false
    },
    "NumNodes": {
     "type": "integer"
    }
   },
   "required": [
    "NumNodes",
    "MainNode",
    "NodeRangeProperties"
   ],
   "type": "object"
  },
  "NodeRangeProperty": {
   "additionalProperties": false,
   "properties": {
    "Container": {
     "$ref": "#/definitions/ContainerProperties"
    },
    "TargetNodes": {
     "type": "string"
    }
   },
   "required": [
    "TargetNodes"
   ],
   "type": "object"
  },
  "ResourceRequirement": {
   "additionalProperties": false,
   "properties": {
    "Type": {
     "type": "string"
    },
    "Value": {
     "type": "string"
    }
   },
   "type": "object"
  },
  "RetryStrategy": {
   "additionalProperties": false,
   "properties": {
    "Attempts": {
     "type": "integer"
    },
    "EvaluateOnExit": {
     "insertionOrder": false,
     "items": {
      "$ref": "#/definitions/EvaluateOnExit"
     },
     "type": "array",
     "uniqueItems": false
    }
   },
   "type": "object"
  },
  "Secret": {
   "additionalProperties": false,
   "properties": {
    "Name": {
     "type": "string"
    },
    "ValueFrom": {
     "type": "string"
    }
   },
   "required": [
    "Name",
    "ValueFrom"
   ],
   "type": "object"
  },
  "Tmpfs": {
   "additionalProperties": false,
   "properties": {
    "ContainerPath": {
     "type": "string"
    },
    "MountOptions": {
     "insertionOrder": false,
     "items": {
      "type": "string"
     },
     "type": "array",
     "uniqueItems": false
    },
    "Size": {
     "type": "integer"
    }
   },
   "required": [
    "ContainerPath",
    "Size"
   ],
   "type": "object"
  },
  "Ulimit": {
   "additionalProperties": false,
   "properties": {
    "HardLimit": {
     "type": "integer"
    },
    "Name": {
     "type": "string"
    },
    "SoftLimit": {
     "type": "integer"
    }
   },
   "required": [
    "HardLimit",
    "Name",
    "SoftLimit"
   ],
   "type": "object"
  },
  "Volume": {
   "additionalProperties": false,
   "properties": {
    "EfsVolumeConfiguration": {
     "$ref": "#/definitions/EFSVolumeConfiguration"
    },
    "Host": {
     "$ref": "#/definitions/Host"
    },
    "Name": {
     "type": "string"
    }
   },
   "type": "object"
  }
 },
 "description": "Resource Type definition for AWS::Batch::JobDefinition",
 "handlers": {
  "create": {
   "permissions": [
    "Batch:RegisterJobDefinition",
    "Batch:TagResource",
    "Batch:DescribeJobDefinitions",
    "Iam:PassRole"
   ]
  },
  "delete": {
   "permissions": [
    "Batch:DescribeJobDefinitions",
    "Batch:DeregisterJobDefinition",
    "Iam:PassRole"
   ]
  },
  "list": {
   "permissions": [
    "Batch:DescribeJobDefinitions"
   ]
  },
  "read": {
   "permissions": [
    "Batch:DescribeJobDefinitions"
   ]
  },
  "update": {
   "permissions": [
    "Batch:DescribeJobDefinitions",
    "Batch:TagResource",
    "Batch:UntagResource",
    "Iam:PassRole"
   ]
  }
 },
 "primaryIdentifier": [
  "/properties/JobDefinitionArn"
 ],
 "properties": {
  "ContainerOrchestrationType": {
   "type": "string"
  },
  "ContainerProperties": {
   "$ref": "#/definitions/ContainerProperties"
  },
  "EksProperties": {
   "$ref": "#/definitions/EksProperties"
  },
  "JobDefinitionArn": {
   "type": "string"
  },
  "JobDefinitionName": {
   "maxLength": 128,
   "type": "string"
  },
  "NodeProperties": {
   "$ref": "#/definitions/NodeProperties"
  },
  "Parameters": {
   "additionalProperties": false,
   "patternProperties": {
    ".*": {
     "type": "string"
    }
   },
   "type": "object"
  },
  "PlatformCapabilities": {
   "insertionOrder": true,
   "items": {
    "type": "string"
   },
   "type": "array",
   "uniqueItems": false
  },
  "PropagateTags": {
   "type": "boolean"
  },
  "RetryStrategy": {
   "$ref": "#/definitions/RetryStrategy"
  },
  "Revision": {
   "type": "integer"
  },
  "SchedulingPriority": {
   "type": "integer"
  },
  "Status": {
   "type": "string"
  },
  "Tags": {
   "additionalProperties": false,
   "description": "A key-value pair to associate with a resource.",
   "patternProperties": {
    ".*": {
     "type": "string"
    }
   },
   "type": "object"
  },
  "Timeout": {
   "$ref": "#/definitions/JobTimeout"
  },
  "Type": {
   "type": "string"
  }
 },
 "readOnlyProperties": [
  "/properties/ContainerOrchestrationType",
  "/properties/JobDefinitionArn",
  "/properties/Revision",
  "/properties/Status"
 ],
 "required": [
  "Type"
 ],
 "sourceUrl": "https://github.com/aws-cloudformation/aws-cloudformation-rpdk.git",
 "tagging": {
  "cloudFormationSystemTags": false,
  "tagOnCreate": true,
  "tagProperty": "/properties/Tags",
  "tagUpdatable": true,
  "taggable": true
 },
 "typeName": "AWS::Batch::JobDefinition",
 "writeOnlyProperties": [
  "/properties/ContainerProperties/InstanceType",
  "/properties/NodeProperties/NodeRangeProperties/*/Container/FargatePlatformConfiguration/PlatformVersion",
  "/properties/NodeProperties/NodeRangeProperties/*/Container/NetworkConfiguration/AssignPublicIp"
 ]
}
