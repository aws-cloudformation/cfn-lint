{
 "additionalProperties": false,
 "createOnlyProperties": [
  "/properties/Name"
 ],
 "definitions": {
  "ApiKeyAuthParameters": {
   "additionalProperties": false,
   "properties": {
    "ApiKeyName": {
     "type": "string"
    },
    "ApiKeyValue": {
     "type": "string"
    }
   },
   "required": [
    "ApiKeyName",
    "ApiKeyValue"
   ],
   "type": "object"
  },
  "AuthParameters": {
   "additionalProperties": false,
   "maxProperties": 2,
   "minProperties": 1,
   "oneOf": [
    {
     "required": [
      "BasicAuthParameters"
     ]
    },
    {
     "required": [
      "OAuthParameters"
     ]
    },
    {
     "required": [
      "ApiKeyAuthParameters"
     ]
    }
   ],
   "properties": {
    "ApiKeyAuthParameters": {
     "$ref": "#/definitions/ApiKeyAuthParameters"
    },
    "BasicAuthParameters": {
     "$ref": "#/definitions/BasicAuthParameters"
    },
    "InvocationHttpParameters": {
     "$ref": "#/definitions/ConnectionHttpParameters"
    },
    "OAuthParameters": {
     "$ref": "#/definitions/OAuthParameters"
    }
   },
   "type": "object"
  },
  "BasicAuthParameters": {
   "additionalProperties": false,
   "properties": {
    "Password": {
     "type": "string"
    },
    "Username": {
     "type": "string"
    }
   },
   "required": [
    "Username",
    "Password"
   ],
   "type": "object"
  },
  "ClientParameters": {
   "additionalProperties": false,
   "properties": {
    "ClientID": {
     "type": "string"
    },
    "ClientSecret": {
     "type": "string"
    }
   },
   "required": [
    "ClientID",
    "ClientSecret"
   ],
   "type": "object"
  },
  "ConnectionHttpParameters": {
   "additionalProperties": false,
   "properties": {
    "BodyParameters": {
     "items": {
      "$ref": "#/definitions/Parameter"
     },
     "type": "array"
    },
    "HeaderParameters": {
     "items": {
      "$ref": "#/definitions/Parameter"
     },
     "type": "array"
    },
    "QueryStringParameters": {
     "items": {
      "$ref": "#/definitions/Parameter"
     },
     "type": "array"
    }
   },
   "type": "object"
  },
  "OAuthParameters": {
   "additionalProperties": false,
   "properties": {
    "AuthorizationEndpoint": {
     "maxLength": 2048,
     "minLength": 1,
     "type": "string"
    },
    "ClientParameters": {
     "$ref": "#/definitions/ClientParameters"
    },
    "HttpMethod": {
     "enum": [
      "GET",
      "POST",
      "PUT"
     ],
     "type": "string"
    },
    "OAuthHttpParameters": {
     "$ref": "#/definitions/ConnectionHttpParameters"
    }
   },
   "required": [
    "ClientParameters",
    "AuthorizationEndpoint",
    "HttpMethod"
   ],
   "type": "object"
  },
  "Parameter": {
   "additionalProperties": false,
   "properties": {
    "IsValueSecret": {
     "default": true,
     "type": "boolean"
    },
    "Key": {
     "type": "string"
    },
    "Value": {
     "type": "string"
    }
   },
   "required": [
    "Key",
    "Value"
   ],
   "type": "object"
  }
 },
 "description": "Resource Type definition for AWS::Events::Connection.",
 "handlers": {
  "create": {
   "permissions": [
    "events:CreateConnection",
    "secretsmanager:CreateSecret",
    "secretsmanager:GetSecretValue",
    "secretsmanager:PutSecretValue",
    "iam:CreateServiceLinkedRole"
   ]
  },
  "delete": {
   "permissions": [
    "events:DeleteConnection"
   ]
  },
  "list": {
   "permissions": [
    "events:ListConnections"
   ]
  },
  "read": {
   "permissions": [
    "events:DescribeConnection"
   ]
  },
  "update": {
   "permissions": [
    "events:UpdateConnection",
    "events:DescribeConnection",
    "secretsmanager:CreateSecret",
    "secretsmanager:UpdateSecret",
    "secretsmanager:GetSecretValue",
    "secretsmanager:PutSecretValue"
   ]
  }
 },
 "primaryIdentifier": [
  "/properties/Name"
 ],
 "properties": {
  "Arn": {
   "description": "The arn of the connection resource.",
   "type": "string"
  },
  "AuthParameters": {
   "$ref": "#/definitions/AuthParameters"
  },
  "AuthorizationType": {
   "enum": [
    "API_KEY",
    "BASIC",
    "OAUTH_CLIENT_CREDENTIALS"
   ],
   "type": "string"
  },
  "Description": {
   "description": "Description of the connection.",
   "maxLength": 512,
   "type": "string"
  },
  "Name": {
   "description": "Name of the connection.",
   "maxLength": 64,
   "minLength": 1,
   "type": "string"
  },
  "SecretArn": {
   "description": "The arn of the secrets manager secret created in the customer account.",
   "type": "string"
  }
 },
 "readOnlyProperties": [
  "/properties/Arn",
  "/properties/SecretArn"
 ],
 "required": [
  "AuthorizationType",
  "AuthParameters"
 ],
 "typeName": "AWS::Events::Connection",
 "writeOnlyProperties": [
  "/properties/AuthParameters"
 ]
}
