{
 "additionalProperties": false,
 "conditionalCreateOnlyProperties": [
  "/properties/LaunchConfigurationName",
  "/properties/VPCZoneIdentifier",
  "/properties/PlacementGroup",
  "/properties/LaunchTemplate",
  "/properties/MixedInstancesPolicy"
 ],
 "createOnlyProperties": [
  "/properties/InstanceId",
  "/properties/AutoScalingGroupName"
 ],
 "definitions": {
  "AcceleratorCountRequest": {
   "additionalProperties": false,
   "properties": {
    "Max": {
     "type": "integer"
    },
    "Min": {
     "type": "integer"
    }
   },
   "type": "object"
  },
  "AcceleratorTotalMemoryMiBRequest": {
   "additionalProperties": false,
   "properties": {
    "Max": {
     "type": "integer"
    },
    "Min": {
     "type": "integer"
    }
   },
   "type": "object"
  },
  "BaselineEbsBandwidthMbpsRequest": {
   "additionalProperties": false,
   "properties": {
    "Max": {
     "type": "integer"
    },
    "Min": {
     "type": "integer"
    }
   },
   "type": "object"
  },
  "InstanceMaintenancePolicy": {
   "additionalProperties": false,
   "dependencies": {
    "MaxHealthyPercentage": [
     "MinHealthyPercentage"
    ],
    "MinHealthyPercentage": [
     "MaxHealthyPercentage"
    ]
   },
   "properties": {
    "MaxHealthyPercentage": {
     "type": "integer"
    },
    "MinHealthyPercentage": {
     "type": "integer"
    }
   },
   "type": "object"
  },
  "InstanceRequirements": {
   "additionalProperties": false,
   "properties": {
    "AcceleratorCount": {
     "$ref": "#/definitions/AcceleratorCountRequest"
    },
    "AcceleratorManufacturers": {
     "insertionOrder": false,
     "items": {
      "type": "string"
     },
     "type": "array",
     "uniqueItems": true
    },
    "AcceleratorNames": {
     "insertionOrder": false,
     "items": {
      "type": "string"
     },
     "type": "array",
     "uniqueItems": true
    },
    "AcceleratorTotalMemoryMiB": {
     "$ref": "#/definitions/AcceleratorTotalMemoryMiBRequest"
    },
    "AcceleratorTypes": {
     "insertionOrder": false,
     "items": {
      "type": "string"
     },
     "type": "array",
     "uniqueItems": true
    },
    "AllowedInstanceTypes": {
     "insertionOrder": true,
     "items": {
      "type": "string"
     },
     "type": "array",
     "uniqueItems": true
    },
    "BareMetal": {
     "type": "string"
    },
    "BaselineEbsBandwidthMbps": {
     "$ref": "#/definitions/BaselineEbsBandwidthMbpsRequest"
    },
    "BurstablePerformance": {
     "type": "string"
    },
    "CpuManufacturers": {
     "insertionOrder": false,
     "items": {
      "type": "string"
     },
     "type": "array",
     "uniqueItems": true
    },
    "ExcludedInstanceTypes": {
     "insertionOrder": true,
     "items": {
      "type": "string"
     },
     "type": "array",
     "uniqueItems": true
    },
    "InstanceGenerations": {
     "insertionOrder": false,
     "items": {
      "type": "string"
     },
     "type": "array",
     "uniqueItems": true
    },
    "LocalStorage": {
     "type": "string"
    },
    "LocalStorageTypes": {
     "insertionOrder": false,
     "items": {
      "type": "string"
     },
     "type": "array",
     "uniqueItems": true
    },
    "MemoryGiBPerVCpu": {
     "$ref": "#/definitions/MemoryGiBPerVCpuRequest"
    },
    "MemoryMiB": {
     "$ref": "#/definitions/MemoryMiBRequest"
    },
    "NetworkBandwidthGbps": {
     "$ref": "#/definitions/NetworkBandwidthGbpsRequest"
    },
    "NetworkInterfaceCount": {
     "$ref": "#/definitions/NetworkInterfaceCountRequest"
    },
    "OnDemandMaxPricePercentageOverLowestPrice": {
     "type": "integer"
    },
    "RequireHibernateSupport": {
     "type": "boolean"
    },
    "SpotMaxPricePercentageOverLowestPrice": {
     "type": "integer"
    },
    "TotalLocalStorageGB": {
     "$ref": "#/definitions/TotalLocalStorageGBRequest"
    },
    "VCpuCount": {
     "$ref": "#/definitions/VCpuCountRequest"
    }
   },
   "type": "object"
  },
  "InstancesDistribution": {
   "additionalProperties": false,
   "properties": {
    "OnDemandAllocationStrategy": {
     "type": "string"
    },
    "OnDemandBaseCapacity": {
     "type": "integer"
    },
    "OnDemandPercentageAboveBaseCapacity": {
     "type": "integer"
    },
    "SpotAllocationStrategy": {
     "type": "string"
    },
    "SpotInstancePools": {
     "type": "integer"
    },
    "SpotMaxPrice": {
     "type": "string"
    }
   },
   "type": "object"
  },
  "LaunchTemplate": {
   "additionalProperties": false,
   "properties": {
    "LaunchTemplateSpecification": {
     "$ref": "#/definitions/LaunchTemplateSpecification"
    },
    "Overrides": {
     "insertionOrder": true,
     "items": {
      "$ref": "#/definitions/LaunchTemplateOverrides"
     },
     "type": "array",
     "uniqueItems": false
    }
   },
   "required": [
    "LaunchTemplateSpecification"
   ],
   "type": "object"
  },
  "LaunchTemplateOverrides": {
   "additionalProperties": false,
   "properties": {
    "InstanceRequirements": {
     "$ref": "#/definitions/InstanceRequirements"
    },
    "InstanceType": {
     "type": "string"
    },
    "LaunchTemplateSpecification": {
     "$ref": "#/definitions/LaunchTemplateSpecification"
    },
    "WeightedCapacity": {
     "type": "string"
    }
   },
   "type": "object"
  },
  "LaunchTemplateSpecification": {
   "additionalProperties": false,
   "oneOf": [
    {
     "properties": {
      "LaunchTemplateName": false
     },
     "required": [
      "LaunchTemplateID"
     ],
     "type": "object"
    },
    {
     "properties": {
      "LaunchTemplateID": false
     },
     "required": [
      "LaunchTemplateName"
     ],
     "type": "object"
    },
    {
     "maxProperties": 1,
     "minProperties": 1,
     "propertyNames": {
      "enum": [
       "Fn::Base64",
       "Fn::GetAtt",
       "Fn::GetAZs",
       "Fn::ImportValue",
       "Fn::Join",
       "Fn::Split",
       "Fn::FindInMap",
       "Fn::Select",
       "Ref",
       "Fn::If",
       "Fn::Contains",
       "Fn::Sub",
       "Fn::Cidr",
       "Fn::Length",
       "Fn::ToJsonString",
       "Fn::ForEach::[a-zA-Z0-9]+"
      ]
     },
     "type": "object"
    }
   ],
   "oneOfDescription": "Specify only one ['LaunchTemplateID', 'LaunchTemplateName']",
   "properties": {
    "LaunchTemplateId": {
     "type": "string"
    },
    "LaunchTemplateName": {
     "type": "string"
    },
    "Version": {
     "type": "string"
    }
   },
   "required": [
    "Version"
   ],
   "type": "object"
  },
  "LifecycleHookSpecification": {
   "additionalProperties": false,
   "properties": {
    "DefaultResult": {
     "type": "string"
    },
    "HeartbeatTimeout": {
     "type": "integer"
    },
    "LifecycleHookName": {
     "type": "string"
    },
    "LifecycleTransition": {
     "type": "string"
    },
    "NotificationMetadata": {
     "type": "string"
    },
    "NotificationTargetARN": {
     "type": "string"
    },
    "RoleARN": {
     "type": "string"
    }
   },
   "required": [
    "LifecycleHookName",
    "LifecycleTransition"
   ],
   "type": "object"
  },
  "MemoryGiBPerVCpuRequest": {
   "additionalProperties": false,
   "properties": {
    "Max": {
     "type": "number"
    },
    "Min": {
     "type": "number"
    }
   },
   "type": "object"
  },
  "MemoryMiBRequest": {
   "additionalProperties": false,
   "properties": {
    "Max": {
     "type": "integer"
    },
    "Min": {
     "type": "integer"
    }
   },
   "type": "object"
  },
  "MetricsCollection": {
   "additionalProperties": false,
   "properties": {
    "Granularity": {
     "type": "string"
    },
    "Metrics": {
     "insertionOrder": false,
     "items": {
      "type": "string"
     },
     "type": "array",
     "uniqueItems": false
    }
   },
   "required": [
    "Granularity"
   ],
   "type": "object"
  },
  "MixedInstancesPolicy": {
   "additionalProperties": false,
   "properties": {
    "InstancesDistribution": {
     "$ref": "#/definitions/InstancesDistribution"
    },
    "LaunchTemplate": {
     "$ref": "#/definitions/LaunchTemplate"
    }
   },
   "required": [
    "LaunchTemplate"
   ],
   "type": "object"
  },
  "NetworkBandwidthGbpsRequest": {
   "additionalProperties": false,
   "properties": {
    "Max": {
     "type": "number"
    },
    "Min": {
     "type": "number"
    }
   },
   "type": "object"
  },
  "NetworkInterfaceCountRequest": {
   "additionalProperties": false,
   "properties": {
    "Max": {
     "type": "integer"
    },
    "Min": {
     "type": "integer"
    }
   },
   "type": "object"
  },
  "NotificationConfiguration": {
   "additionalProperties": false,
   "properties": {
    "NotificationTypes": {
     "insertionOrder": false,
     "items": {
      "type": "string"
     },
     "type": "array",
     "uniqueItems": false
    },
    "TopicARN": {
     "items": {
      "type": "string"
     },
     "type": [
      "string",
      "array"
     ]
    }
   },
   "required": [
    "TopicARN"
   ],
   "type": "object"
  },
  "TagProperty": {
   "additionalProperties": false,
   "properties": {
    "Key": {
     "type": "string"
    },
    "PropagateAtLaunch": {
     "type": "boolean"
    },
    "Value": {
     "type": "string"
    }
   },
   "required": [
    "Value",
    "Key",
    "PropagateAtLaunch"
   ],
   "type": "object"
  },
  "TotalLocalStorageGBRequest": {
   "additionalProperties": false,
   "properties": {
    "Max": {
     "type": "number"
    },
    "Min": {
     "type": "number"
    }
   },
   "type": "object"
  },
  "VCpuCountRequest": {
   "additionalProperties": false,
   "properties": {
    "Max": {
     "type": "integer"
    },
    "Min": {
     "type": "integer"
    }
   },
   "type": "object"
  }
 },
 "dependencies": {
  "InstanceId": {
   "properties": {
    "LaunchConfigurationName": false,
    "LaunchTemplate": false,
    "MixedInstancesPolicy": false
   },
   "type": "object"
  },
  "LaunchConfigurationName": {
   "properties": {
    "InstanceId": false,
    "LaunchTemplate": false,
    "MixedInstancesPolicy": false
   },
   "type": "object"
  },
  "LaunchTemplate": {
   "properties": {
    "InstanceId": false,
    "LaunchConfigurationName": false,
    "MixedInstancesPolicy": false
   },
   "type": "object"
  }
 },
 "deprecatedProperties": [
  "/properties/NotificationConfiguration"
 ],
 "description": "Resource Type definition for AWS::AutoScaling::AutoScalingGroup",
 "handlers": {
  "create": {
   "permissions": [
    "autoscaling:*",
    "cloudwatch:PutMetricAlarm",
    "ec2:DescribeAccountAttributes",
    "ec2:DescribeAvailabilityZones",
    "ec2:DescribeImages",
    "ec2:DescribeInstanceAttribute",
    "ec2:DescribeInstances",
    "ec2:DescribeInstanceTypes",
    "ec2:DescribeInstanceTypeOfferings",
    "ec2:DescribeKeyPairs",
    "ec2:DescribeLaunchTemplateVersions",
    "ec2:DescribePlacementGroups",
    "ec2:DescribeSecurityGroups",
    "ec2:DescribeSpotInstanceRequests",
    "ec2:DescribeSubnets",
    "ec2:DescribeVpcClassicLink",
    "ec2:GetInstanceTypesFromInstanceRequirements",
    "ec2:RunInstances",
    "elasticloadbalancing:DescribeLoadBalancers",
    "elasticloadbalancing:DescribeTargetGroups",
    "iam:CreateServiceLinkedRole",
    "iam:PassRole",
    "managed-fleets:GetAutoScalingGroup",
    "managed-fleets:CreateAutoScalingGroup",
    "ssm:GetParameters"
   ],
   "timeoutInMinutes": 120
  },
  "delete": {
   "permissions": [
    "autoscaling:*",
    "managed-fleets:GetAutoScalingGroup",
    "managed-fleets:DeleteAutoScalingGroup"
   ],
   "timeoutInMinutes": 180
  },
  "list": {
   "permissions": [
    "autoscaling:*"
   ]
  },
  "read": {
   "permissions": [
    "autoscaling:*",
    "managed-fleets:GetAutoScalingGroup"
   ]
  },
  "update": {
   "permissions": [
    "autoscaling:*",
    "cloudwatch:PutMetricAlarm",
    "ec2:DescribeAccountAttributes",
    "ec2:DescribeAvailabilityZones",
    "ec2:DescribeImages",
    "ec2:DescribeInstanceAttribute",
    "ec2:DescribeInstances",
    "ec2:DescribeInstanceTypes",
    "ec2:DescribeInstanceTypeOfferings",
    "ec2:DescribeKeyPairs",
    "ec2:DescribeLaunchTemplateVersions",
    "ec2:DescribePlacementGroups",
    "ec2:DescribeSecurityGroups",
    "ec2:DescribeSpotInstanceRequests",
    "ec2:DescribeSubnets",
    "ec2:DescribeVpcClassicLink",
    "ec2:GetInstanceTypesFromInstanceRequirements",
    "ec2:RunInstances",
    "elasticloadbalancing:DescribeLoadBalancers",
    "elasticloadbalancing:DescribeTargetGroups",
    "iam:CreateServiceLinkedRole",
    "iam:PassRole",
    "managed-fleets:GetAutoScalingGroup",
    "managed-fleets:RegisterAutoScalingGroup",
    "managed-fleets:DeregisterAutoScalingGroup",
    "managed-fleets:UpdateAutoScalingGroup",
    "ssm:GetParameters"
   ],
   "timeoutInMinutes": 480
  }
 },
 "primaryIdentifier": [
  "/properties/AutoScalingGroupName"
 ],
 "properties": {
  "AutoScalingGroupName": {
   "type": "string"
  },
  "AvailabilityZones": {
   "awsType": "AvailabilityZones",
   "insertionOrder": false,
   "items": {
    "awsType": "AvailabilityZone",
    "type": "string"
   },
   "type": "array",
   "uniqueItems": false
  },
  "CapacityRebalance": {
   "type": "boolean"
  },
  "Context": {
   "type": "string"
  },
  "Cooldown": {
   "type": "string"
  },
  "DefaultInstanceWarmup": {
   "type": "integer"
  },
  "DesiredCapacity": {
   "pattern": "^[0-9]+$",
   "type": "string"
  },
  "DesiredCapacityType": {
   "type": "string"
  },
  "HealthCheckGracePeriod": {
   "type": "integer"
  },
  "HealthCheckType": {
   "enum": [
    "EC2",
    "ELB"
   ],
   "type": "string"
  },
  "InstanceId": {
   "type": "string"
  },
  "InstanceMaintenancePolicy": {
   "$ref": "#/definitions/InstanceMaintenancePolicy"
  },
  "LaunchConfigurationName": {
   "type": "string"
  },
  "LaunchTemplate": {
   "$ref": "#/definitions/LaunchTemplateSpecification"
  },
  "LifecycleHookSpecificationList": {
   "insertionOrder": true,
   "items": {
    "$ref": "#/definitions/LifecycleHookSpecification"
   },
   "type": "array",
   "uniqueItems": false
  },
  "LoadBalancerNames": {
   "insertionOrder": true,
   "items": {
    "type": "string"
   },
   "type": "array",
   "uniqueItems": false
  },
  "MaxInstanceLifetime": {
   "type": "integer"
  },
  "MaxSize": {
   "pattern": "^[0-9]+$",
   "type": "string"
  },
  "MetricsCollection": {
   "insertionOrder": true,
   "items": {
    "$ref": "#/definitions/MetricsCollection"
   },
   "type": "array",
   "uniqueItems": false
  },
  "MinSize": {
   "pattern": "^[0-9]+$",
   "type": "string"
  },
  "MixedInstancesPolicy": {
   "$ref": "#/definitions/MixedInstancesPolicy"
  },
  "NewInstancesProtectedFromScaleIn": {
   "type": "boolean"
  },
  "NotificationConfiguration": {
   "$ref": "#/definitions/NotificationConfiguration"
  },
  "NotificationConfigurations": {
   "insertionOrder": true,
   "items": {
    "$ref": "#/definitions/NotificationConfiguration"
   },
   "type": "array",
   "uniqueItems": false
  },
  "PlacementGroup": {
   "type": "string"
  },
  "ServiceLinkedRoleARN": {
   "type": "string"
  },
  "Tags": {
   "insertionOrder": false,
   "items": {
    "$ref": "#/definitions/TagProperty"
   },
   "type": "array"
  },
  "TargetGroupARNs": {
   "insertionOrder": true,
   "items": {
    "type": "string"
   },
   "type": "array",
   "uniqueItems": false
  },
  "TerminationPolicies": {
   "insertionOrder": true,
   "items": {
    "type": "string"
   },
   "type": "array",
   "uniqueItems": false
  },
  "VPCZoneIdentifier": {
   "insertionOrder": false,
   "items": {
    "type": "string"
   },
   "type": "array",
   "uniqueItems": false
  }
 },
 "propertyTransform": {
  "/properties/LaunchConfigurationName": "InstanceId? AutoScalingGroupName : LaunchConfigurationName"
 },
 "required": [
  "MinSize",
  "MaxSize"
 ],
 "tagging": {
  "cloudFormationSystemTags": true,
  "tagOnCreate": true,
  "tagProperty": "/properties/Tags",
  "tagUpdatable": true,
  "taggable": true
 },
 "typeName": "AWS::AutoScaling::AutoScalingGroup",
 "writeOnlyProperties": [
  "/properties/InstanceId"
 ]
}
