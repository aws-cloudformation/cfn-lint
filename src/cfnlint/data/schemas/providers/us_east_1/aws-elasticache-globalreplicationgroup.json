{
 "additionalProperties": false,
 "definitions": {
  "GlobalReplicationGroupMember": {
   "additionalProperties": false,
   "properties": {
    "ReplicationGroupId": {
     "description": "Regionally unique identifier for the member i.e. ReplicationGroupId.",
     "type": "string"
    },
    "ReplicationGroupRegion": {
     "description": "The AWS region of the Global Datastore member.",
     "type": "string"
    },
    "Role": {
     "description": "Indicates the role of the member, primary or secondary.",
     "enum": [
      "PRIMARY",
      "SECONDARY"
     ],
     "type": "string"
    }
   },
   "type": "object"
  },
  "RegionalConfiguration": {
   "additionalProperties": false,
   "properties": {
    "ReplicationGroupId": {
     "description": "The replication group id of the Global Datastore member.",
     "type": "string"
    },
    "ReplicationGroupRegion": {
     "description": "The AWS region of the Global Datastore member.",
     "type": "string"
    },
    "ReshardingConfigurations": {
     "description": "A list of PreferredAvailabilityZones objects that specifies the configuration of a node group in the resharded cluster. ",
     "items": {
      "$ref": "#/definitions/ReshardingConfiguration"
     },
     "type": "array",
     "uniqueItems": true
    }
   },
   "type": "object"
  },
  "ReshardingConfiguration": {
   "additionalProperties": false,
   "properties": {
    "NodeGroupId": {
     "description": "Unique identifier for the Node Group. This is either auto-generated by ElastiCache (4-digit id) or a user supplied id.",
     "type": "string"
    },
    "PreferredAvailabilityZones": {
     "description": "A list of preferred availability zones for the nodes of new node groups.",
     "items": {
      "type": "string"
     },
     "type": "array",
     "uniqueItems": false
    }
   },
   "type": "object"
  }
 },
 "description": "The AWS::ElastiCache::GlobalReplicationGroup resource creates an Amazon ElastiCache Global Replication Group.",
 "handlers": {
  "create": {
   "permissions": [
    "elasticache:CreateGlobalReplicationGroup",
    "elasticache:DescribeGlobalReplicationGroups"
   ]
  },
  "delete": {
   "permissions": [
    "elasticache:DeleteGlobalReplicationGroup",
    "elasticache:DisassociateGlobalReplicationGroup",
    "elasticache:DescribeGlobalReplicationGroups"
   ]
  },
  "list": {
   "permissions": [
    "elasticache:DescribeGlobalReplicationGroups"
   ]
  },
  "read": {
   "permissions": [
    "elasticache:DescribeGlobalReplicationGroups"
   ]
  },
  "update": {
   "permissions": [
    "elasticache:ModifyGlobalReplicationGroup",
    "elasticache:FailoverGlobalReplicationGroup",
    "elasticache:DescribeGlobalReplicationGroups",
    "elasticache:IncreaseNodeGroupsInGlobalReplicationGroup",
    "elasticache:DecreaseNodeGroupsInGlobalReplicationGroup",
    "elasticache:DisassociateGlobalReplicationGroup",
    "elasticache:RebalanceSlotsInGlobalReplicationGroup"
   ]
  }
 },
 "primaryIdentifier": [
  "/properties/GlobalReplicationGroupId"
 ],
 "properties": {
  "AutomaticFailoverEnabled": {
   "description": "AutomaticFailoverEnabled",
   "type": "boolean"
  },
  "CacheNodeType": {
   "description": "The cache node type of the Global Datastore",
   "type": "string"
  },
  "CacheParameterGroupName": {
   "description": "Cache parameter group name to use for the new engine version. This parameter cannot be modified independently.",
   "type": "string"
  },
  "EngineVersion": {
   "description": "The engine version of the Global Datastore.",
   "type": "string"
  },
  "GlobalNodeGroupCount": {
   "description": "Indicates the number of node groups in the Global Datastore.",
   "type": "integer"
  },
  "GlobalReplicationGroupDescription": {
   "description": "The optional description of the Global Datastore",
   "type": "string"
  },
  "GlobalReplicationGroupId": {
   "description": "The name of the Global Datastore, it is generated by ElastiCache adding a prefix to GlobalReplicationGroupIdSuffix.",
   "type": "string"
  },
  "GlobalReplicationGroupIdSuffix": {
   "description": "The suffix name of a Global Datastore. Amazon ElastiCache automatically applies a prefix to the Global Datastore ID when it is created. Each AWS Region has its own prefix. ",
   "type": "string"
  },
  "Members": {
   "description": "The replication groups that comprise the Global Datastore.",
   "items": {
    "$ref": "#/definitions/GlobalReplicationGroupMember"
   },
   "minItems": 1,
   "type": "array",
   "uniqueItems": true
  },
  "RegionalConfigurations": {
   "description": "Describes the replication group IDs, the AWS regions where they are stored and the shard configuration for each that comprise the Global Datastore ",
   "items": {
    "$ref": "#/definitions/RegionalConfiguration"
   },
   "type": "array",
   "uniqueItems": true
  },
  "Status": {
   "description": "The status of the Global Datastore",
   "type": "string"
  }
 },
 "readOnlyProperties": [
  "/properties/GlobalReplicationGroupId",
  "/properties/Status"
 ],
 "required": [
  "Members"
 ],
 "sourceUrl": "https://github.com/aws-cloudformation/aws-cloudformation-resource-providers-elasticache",
 "typeName": "AWS::ElastiCache::GlobalReplicationGroup",
 "writeOnlyProperties": [
  "/properties/GlobalReplicationGroupIdSuffix",
  "/properties/AutomaticFailoverEnabled",
  "/properties/CacheNodeType",
  "/properties/EngineVersion",
  "/properties/GlobalNodeGroupCount",
  "/properties/GlobalReplicationGroupDescription",
  "/properties/RegionalConfigurations"
 ]
}
